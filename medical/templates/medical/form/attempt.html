{% extends "medical/base_medical.html" %}

{% block title %}Attempt Form{% endblock %}

{% block content %}
  <h1>Attempt Form</h1>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}

    {% if answer_formset %}
    <h3>Answers</h3>
    {{ answer_formset.management_form }}
    {% for answer in answer_formset %}
        <div class="answer-block">
            <p><strong>{{ answer.instance.question.question_code }} {{ answer.instance.question.question_text }}</strong></p>
            {{ answer.as_p }}
        </div>
    {% endfor %}
    {% endif %}

    <button class="btn btn-primary" type="submit">Submit</button>
    <button class="btn btn-secondary" onclick="window.location.href='/medical/attempts/'">Cancel</button>
  </form>
{% endblock %}

{% block extra_scripts %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        flatpickr("#id_scheduled_for", {
            enableTime: true,
            dateFormat: "Y-m-d H:i",
            time_24hr: true,
        });
    </script>
{% endblock %}